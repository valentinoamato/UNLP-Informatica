;e) Escribir un programa que encienda una luz a la vez, de las ocho conectadas al puerto paralelo del
;microprocesador a trav√©s de la PIO, en el siguiente orden de bits:
;0-1-2-3-4-5-6-7-6-5-4-3-2-1-0-1-2-3-4-5-6-7-6-5-4-3-2-1-0-1-..., es decir, 00000001, 00000010,
;00000100, etc. Cada luz debe estar encendida durante un segundo. El programa nunca termina.
EOI EQU 20H
IMR EQU 21H
INT1 EQU 25H
ID_INT1 EQU 10
CONT EQU 10H
COMP EQU 11H
PB EQU 31H
CB EQU 33H

ORG 40 ;10*4
DIR_INT1 DW RUT_TIMER

ORG 2000H
;CONFIGURACION DE PB COMO SALIDA 
MOV AL, 0
OUT CB, AL
;INICIO PB EN UNO PARA PRENDER LA LUZ DE LA DERECHA
MOV AL,1
OUT PB,AL
;CONFIGURACION DEL TIMER
CLI
;HABILITO INT1
MOV AL,11111101B 
OUT IMR, AL
;CONFIGURO EL VECTOR DE INT1
MOV AL,ID_INT1 
OUT INT1, AL
;COMP
MOV AL,1
OUT COMP,AL
;CONT
MOV AL,0
OUT CONT,AL
STI
;MAIN LOOP
LOOP:JMP LOOP
HLT

ORG 3000H
RUT_TIMER:
;SALVO AX
PUSH AX
;ROTACION IZQUIERDA 1 A PB
IN AL,PB
ADD AL,AL
ADC AL,0
OUT PB,AL
;RESET DE CONT
MOV AL,0
OUT CONT,AL
;EOI
MOV AL,EOI
OUT EOI,AL
;RETORNO
POP AX
IRET
END
